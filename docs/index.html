<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PWA test</title>
    <link rel="manifest" href="manifest.json">
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw-test1.js', { scope: '/' }).then(function(registration) {
                console.log('regist serviceWorker success');
            }).catch(function(err) {
                console.log('regist serviceWorker fail');
                console.log(err);
            })
        })

        window.addEventListener('beforeinstallprompt', function(e) {
            // beforeinstallprompt event fired
            e.userChoice.then(function(choiceResult) {
                if (choiceResult.outcome === 'dismissed') {
                    alert('用户取消安装应用');
                } else {
                    alert('用户安装了应用');
                }
            });
        });
    }
    </script>
</head>

<body>
    <img id='image1'>
    <img src='./img/todolist_144x144.png' />
    <button onclick="setURL()">click</button>
    <script>
    function setURL() {
        let img = document.getElementById('image1');
        img.src = "https://unsplash.it/200/200"
    }
    </script>
</body>

</html>